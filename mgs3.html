<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MGS3 3D Jungle Demo</title>
<style>
  body { margin: 0; overflow: hidden; background: #000; font-family: Arial, sans-serif; color: #0f0; }
  canvas { display: block; }
  /* Include your HUD styles */
  .hud { position: absolute; width: 100%; height: 100%; pointer-events: none; }
  .bar-container { position: absolute; left: 20px; bottom: 20px; width: 200px; height: 20px; border: 2px solid #0f0; }
  .bar { height: 100%; background: #0f0; width: 100%; transition: width 0.2s; }
  .stamina-bar { position: absolute; top: 30px; width: 100%; background: #ff0; }
  .ammo { position: absolute; right: 20px; bottom: 20px; text-align: right; font-size: 16px; }
  .radar { position: absolute; top: 20px; right: 20px; width: 150px; height: 150px; border: 2px solid #0f0; border-radius: 50%; background: rgba(0,255,0,0.1); overflow: hidden; }
  .radar-dot { position: absolute; width: 6px; height: 6px; background: red; border-radius: 50%; }
  .status { position: absolute; left: 20px; bottom: 60px; font-size: 14px; }
</style>
</head>
<body>
<div class="hud">
  <div class="bar-container"><div id="health-bar" class="bar"></div></div>
  <div class="bar-container" style="bottom: 50px;"><div id="stamina-bar" class="bar stamina-bar"></div></div>
  <div class="ammo">Ammo: <span id="ammo-count">15</span></div>
  <div class="radar" id="radar"><div class="radar-dot" style="top: 60px; left: 60px;"></div></div>
  <div class="status" id="status-text">CQC: Ready | Noise: Low</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/examples/js/controls/PointerLockControls.js"></script>
<script>
  // Basic Three.js setup
  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
  const renderer = new THREE.WebGLRenderer({antialias: true});
  renderer.setSize(window.innerWidth, window.innerHeight);
  document.body.appendChild(renderer.domElement);

  // Ground
  const ground = new THREE.Mesh(
    new THREE.PlaneGeometry(100, 100),
    new THREE.MeshPhongMaterial({color: 0x228B22})
  );
  ground.rotation.x = -Math.PI/2;
  scene.add(ground);

  // Light
  const light = new THREE.DirectionalLight(0xffffff, 1);
  light.position.set(10, 20, 10);
  scene.add(light);

  // Player (Snake placeholder)
  const player = new THREE.Mesh(
    new THREE.BoxGeometry(1, 2, 1),
    new THREE.MeshPhongMaterial({color: 0x00ff00})
  );
  player.position.y = 1;
  scene.add(player);

  // Controls
  const controls = new THREE.PointerLockControls(camera, document.body);
  camera.position.set(0,2,5);
  player.add(camera);

  document.body.addEventListener('click', () => controls.lock());

  const move = {forward:0, backward:0, left:0, right:0, crouch:false};
  document.addEventListener('keydown', e => {
    if(e.code === 'KeyW') move.forward = 1;
    if(e.code === 'KeyS') move.backward = 1;
    if(e.code === 'KeyA') move.left = 1;
    if(e.code === 'KeyD') move.right = 1;
    if(e.code === 'ControlLeft') move.crouch = true;
  });
  document.addEventListener('keyup', e => {
    if(e.code === 'KeyW') move.forward = 0;
    if(e.code === 'KeyS') move.backward = 0;
    if(e.code === 'KeyA') move.left = 0;
    if(e.code === 'KeyD') move.right = 0;
    if(e.code === 'ControlLeft') move.crouch = false;
  });

  // HUD variables
  let health = 100, stamina = 100, ammo = 15;
  function updateHUD() {
    document.getElementById('health-bar').style.width = health+'%';
    document.getElementById('stamina-bar').style.width = stamina+'%';
    document.getElementById('ammo-count').textContent = ammo;
    document.getElementById('status-text').textContent = `CQC: Ready | Noise: ${move.crouch?'Low':'Normal'}`;
  }

  // Animation loop
  const clock = new THREE.Clock();
  function animate() {
    requestAnimationFrame(animate);
    const delta = clock.getDelta();
    
    // Player movement
    const speed = move.crouch ? 2 : 5;
    player.translateZ((move.forward - move.backward) * delta * speed);
    player.translateX((move.right - move.left) * delta * speed);
    
    // Camera height for crouch
    camera.position.y = move.crouch ? 1 : 2;

    updateHUD();
    renderer.render(scene, camera);
  }
  animate();

  window.addEventListener('resize', () => {
    camera.aspect = window.innerWidth/window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
  });
</script>
</body>
</html>
