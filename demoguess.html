<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Car Brand Detector</title>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest"></script>
  <style>
    body { font-family: Arial; background:#111; color:#eee; text-align:center; }
    #preview { margin:20px; max-width:300px; border-radius:8px; }
    input { margin: 20px; }
    .result { font-size:20px; margin-top:20px; }
  </style>
</head>
<body>
  <h1>Upload a Car Photo</h1>
  <input type="file" accept="image/*" onchange="loadImage(event)" />
  <br/>
  <img id="preview" />
  <div class="result" id="result">Prediction will appear here</div>

<script>
  let model, labels;

  async function loadEverything() {
    // Load model (from your hosted files)
    model = await tf.loadLayersModel("model/model.json");

    // Load labels (from a JSON file with car class names)
    const res = await fetch("model/labels.json");
    labels = await res.json();

    console.log("Model + labels ready!");
  }

  async function predict(img) {
    let tensor = tf.browser.fromPixels(img)
      .resizeNearestNeighbor([224,224]) // depends on model input size
      .toFloat()
      .expandDims();

    const predictions = await model.predict(tensor).data();
    let maxIndex = predictions.indexOf(Math.max(...predictions));
    document.getElementById("result").innerText =
      "Prediction: " + labels[maxIndex];
  }

  loadEverything();
</script>
</body>
</html>
