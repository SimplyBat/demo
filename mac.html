<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Neurodiversity Screener (Beta)</title>
  <meta name="description" content="A research‑informed, non‑diagnostic neurodiversity screener inspired by AQ‑10 and WHO ASRS‑v1.1. For education only."/>
  <style>
    :root{
      --bg1:#0f1020; --bg2:#141735; --bg3:#0d1321; --card:#11162a; --text:#ecf0ff; --muted:#a7b0d9; --accent:#7c5cff; --accent2:#4bd4ff; --good:#3ad29f; --warn:#ffcc66; --bad:#ff6b6b;
      --glass: rgba(255,255,255,0.06);
      --border: rgba(255,255,255,0.12);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background: radial-gradient(1200px 800px at 15% 10%, #1b2148 0%, transparent 55%),
                          radial-gradient(900px 700px at 85% 10%, #083d77 0%, transparent 60%),
                          radial-gradient(1000px 800px at 20% 85%, #531cb3 0%, transparent 55%),
                          linear-gradient(135deg,var(--bg1),var(--bg2));
         color:var(--text); font: 16px/1.4 system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif; overflow-x:hidden}
    .noise{position:fixed; inset:0; pointer-events:none; opacity:.06; background:
      url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="140" height="140" viewBox="0 0 140 140"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.65" numOctaves="2" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity="1"/></svg>') repeat; mix-blend-mode:soft-light}
    header{position:sticky; top:0; z-index:5; backdrop-filter: saturate(1.2) blur(10px); background:linear-gradient(180deg, rgba(10,12,25,.8), rgba(10,12,25,.35)); border-bottom:1px solid var(--border)}
    .container{max-width:1100px; margin:0 auto; padding:18px 20px}
    .brand{display:flex; align-items:center; gap:12px}
    .logo{width:36px; height:36px; border-radius:12px; background: conic-gradient(from 30deg, var(--accent), var(--accent2), #83ff93, var(--accent)); box-shadow:0 0 30px rgba(124,92,255,.35) inset, 0 8px 20px rgba(0,0,0,.3)}
    h1{font-size:20px; margin:0}
    .muted{color:var(--muted)}
    .row{display:flex; align-items:center; justify-content:space-between; gap:16px}
    .cta{display:flex; gap:10px; align-items:center}
    button, .btn{border:1px solid var(--border); background:var(--glass); color:var(--text); padding:10px 14px; border-radius:14px; cursor:pointer; transition:.2s transform, .2s background, .2s box-shadow}
    button:hover, .btn:hover{transform: translateY(-1px); box-shadow:0 10px 20px rgba(0,0,0,.25); background: rgba(255,255,255,.08)}
    .danger{border-color:rgba(255,107,107,.3)}

    .hero{position:relative; padding:48px 20px 26px}
    .hero h2{font-size:40px; line-height:1.08; margin:8px 0 10px}
    .hero p{max-width:900px}
    .blobs{position:absolute; inset:0; overflow:hidden; z-index:-1}
    .blob{position:absolute; width:420px; height:420px; border-radius:50%; filter: blur(40px); opacity:.45; mix-blend-mode:screen; animation: float 16s ease-in-out infinite}
    .b1{background: radial-gradient(circle at 30% 30%, #7c5cff 0%, #4bd4ff 60%, transparent 70%); top:-80px; left:-60px}
    .b2{background: radial-gradient(circle at 60% 40%, #ff7cb7 0%, #7c5cff 55%, transparent 72%); right:-80px; top:-60px; animation-delay: -7s}
    .b3{background: radial-gradient(circle at 50% 50%, #83ff93 0%, #4bd4ff 60%, transparent 70%); bottom:-140px; left:20% ; animation-delay: -3s}
    @keyframes float{0%{transform:translateY(0) translateX(0)} 50%{transform:translateY(-30px) translateX(10px)} 100%{transform:translateY(0) translateX(0)}}

    main{padding: 10px 20px 80px}
    .grid{display:grid; grid-template-columns: 1fr; gap:18px}
    .card{background: rgba(255,255,255,.06); border:1px solid var(--border); border-radius:18px; padding:18px}
    .card h3{margin: 0 0 6px; font-size:20px}
    .pill{display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; background: rgba(255,255,255,.08); border:1px solid var(--border); font-size:12px}

    /* Form */
    .stepper{display:flex; gap:10px; flex-wrap:wrap; margin-bottom:16px}
    .stepper .step{display:flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px; border:1px solid var(--border); background: rgba(255,255,255,.05)}
    .step.active{background:linear-gradient(135deg, rgba(124,92,255,.25), rgba(75,212,255,.15)); box-shadow: inset 0 0 0 1px rgba(124,92,255,.35)}
    .q{margin: 10px 0; padding:14px; border-radius:12px; border:1px dashed rgba(255,255,255,.18)}
    .q legend{font-weight:600}
    .opts{display:grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap:10px; margin-top:10px}
    .opt{position:relative}
    .opt input{position:absolute; inset:0; opacity:0}
    .opt label{display:block; padding:10px 12px; border-radius:12px; border:1px solid var(--border); background: rgba(0,0,0,.18); cursor:pointer; text-align:center; transition:.15s}
    .opt input:checked + label{outline:2px solid var(--accent2); background: rgba(75,212,255,.08)}

    .nav{display:flex; gap:10px; margin-top:18px}
    .hidden{display:none}

    /* Results */
    .result{display:grid; grid-template-columns: 1fr; gap:12px}
    .bar{height:12px; border-radius:999px; background: rgba(255,255,255,.15); overflow:hidden; border:1px solid var(--border)}
    .bar > span{display:block; height:100%; background: linear-gradient(90deg, var(--accent), var(--accent2)); width:0}
    .score{display:flex; justify-content:space-between; align-items:center}
    .tag{padding:6px 10px; border-radius:999px; font-size:12px; border:1px solid var(--border)}
    .tag.good{background:rgba(58,210,159,.12)}
    .tag.caution{background:rgba(255,204,102,.15)}
    .tag.flag{background:rgba(255,107,107,.15)}

    footer{border-top:1px solid var(--border); padding:20px; background: rgba(0,0,0,.25)}
    a{color:#a3d5ff}

    @media (min-width: 860px){
      .grid{grid-template-columns: 1.35fr .65fr}
    }
  </style>
</head>
<body>
  <div class="noise"></div>
  <header>
    <div class="container row">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>Neurodiversity Screener <span class="muted">(Beta)</span></h1>
          <div class="muted" style="font-size:12px">Educational & non‑diagnostic · Inspired by AQ‑10 & WHO ASRS‑v1.1</div>
        </div>
      </div>
      <div class="cta">
        <button id="saveBtn" title="Save your progress to this device">Save</button>
        <button id="resetBtn" class="danger" title="Clear all answers">Reset</button>
      </div>
    </div>
  </header>

  <section class="hero">
    <div class="container">
      <span class="pill">Inclusive · Respectful · Science‑informed</span>
      <h2>Explore your neurotype—gently, visually, and with care.</h2>
      <p class="muted">This experience offers two brief, research‑informed screeners looking at patterns commonly associated with <strong>autism</strong> and <strong>ADHD</strong>. It is <em>not</em> a diagnosis. Results can help you decide whether to read more or speak with a qualified clinician.</p>
    </div>
    <div class="blobs" aria-hidden="true">
      <div class="blob b1"></div>
      <div class="blob b2"></div>
      <div class="blob b3"></div>
    </div>
  </section>

  <main class="container grid">
    <!-- LEFT: ASSESSMENT -->
    <section class="card" id="app">
      <div class="stepper" aria-label="Steps">
        <div class="step" id="step0">0 · Start</div>
        <div class="step" id="step1">1 · Autism traits</div>
        <div class="step" id="step2">2 · ADHD traits</div>
        <div class="step" id="step3">3 · Results</div>
      </div>

      <!-- STEP 0: Intro / Demographics (optional) -->
      <div id="panel0">
        <h3>Before we begin</h3>
        <p class="muted">You can skip this if you like.</p>
        <form id="form0" class="q" aria-label="About you">
          <div style="display:grid; grid-template-columns: repeat(auto-fit,minmax(180px,1fr)); gap:10px">
            <label> Age (years)
              <input type="number" min="10" max="120" id="age" placeholder="e.g., 19" style="width:100%; margin-top:6px; padding:10px; border-radius:10px; background:#0b0f1b; color:var(--text); border:1px solid var(--border)">
            </label>
            <label> Name or initials (optional)
              <input id="name" placeholder="optional" style="width:100%; margin-top:6px; padding:10px; border-radius:10px; background:#0b0f1b; color:var(--text); border:1px solid var(--border)">
            </label>
            <label> Today’s date
              <input id="date" type="date" style="width:100%; margin-top:6px; padding:10px; border-radius:10px; background:#0b0f1b; color:var(--text); border:1px solid var(--border)">
            </label>
          </div>
        </form>
        <div class="nav">
          <button onclick="go(1)">Start · Autism traits</button>
        </div>
      </div>

      <!-- STEP 1: AUTISM (AQ-10–inspired) -->
      <div id="panel1" class="hidden" aria-live="polite">
        <h3>Autistic Traits (10 items · AQ‑10‑inspired)</h3>
        <p class="muted">Answer how things usually are for you. Options: Strongly Disagree / Disagree / Agree / Strongly Agree.</p>
        <form id="form1"></form>
        <div class="nav">
          <button onclick="go(0)">Back</button>
          <button onclick="go(2)">Next · ADHD traits</button>
        </div>
      </div>

      <!-- STEP 2: ADHD (ASRS‑v1.1–inspired) -->
      <div id="panel2" class="hidden" aria-live="polite">
        <h3>ADHD Traits (6 items · WHO ASRS‑v1.1‑inspired)</h3>
        <p class="muted">Think about the last 6 months. Options: Never / Rarely / Sometimes / Often / Very Often.</p>
        <form id="form2"></form>
        <div class="nav">
          <button onclick="go(1)">Back</button>
          <button onclick="go(3)">See results</button>
        </div>
      </div>

      <!-- STEP 3: RESULTS -->
      <div id="panel3" class="hidden">
        <h3>Your results</h3>
        <div class="result">
          <div>
            <div class="score"><strong>Autistic trait score</strong> <span id="aScoreTag" class="tag">0 / 10</span></div>
            <div class="bar"><span id="aBar"></span></div>
            <div id="aInterp" class="muted" style="margin-top:6px"></div>
          </div>
          <div>
            <div class="score"><strong>ADHD trait score</strong> <span id="hScoreTag" class="tag">0 / 6</span></div>
            <div class="bar"><span id="hBar"></span></div>
            <div id="hInterp" class="muted" style="margin-top:6px"></div>
          </div>
        </div>

        <div class="card" style="margin-top:14px">
          <h3>What this means (and doesn’t)</h3>
          <ul>
            <li>This is <strong>not a diagnosis</strong>. It’s an educational screener to help you decide whether to read more or seek a professional evaluation.</li>
            <li>Cut‑offs are informed by published tools: a total of <strong>6+/10</strong> on the autism section is a commonly used referral threshold in AQ‑10 research; for ADHD, <strong>4+/6 shaded responses</strong> on the ASRS‑v1.1 screener suggests symptoms consistent with ADHD and merits clinical follow‑up.</li>
            <li>The word <em>neurodivergent</em> is broad and includes many neurotypes beyond autism and ADHD; this tool only samples two common domains.</li>
          </ul>
          <div class="nav">
            <button onclick="window.print()">Print / Save as PDF</button>
            <a class="btn" id="downloadBtn" download>Download JSON results</a>
          </div>
        </div>

        <div class="nav">
          <button onclick="go(1)">Review answers</button>
          <button class="danger" onclick="resetAll()">Start over</button>
        </div>
      </div>
    </section>

    <!-- RIGHT: INFO / SOURCES -->
    <aside class="card">
      <h3>Safety & access</h3>
      <p class="muted">If you ever feel unsafe or in crisis, contact local emergency services or a crisis line right away. In the U.S.: <a href="https://988lifeline.org/" target="_blank" rel="noopener">988 Lifeline</a>.</p>
      <hr style="border:0; border-top:1px solid var(--border); margin:12px 0"/>
      <h3>Sources (open‑access)</h3>
      <ul class="muted">
        <li>AQ‑10 (Adult) — Autism Research Centre (Cambridge). Scoring guidance and 6+ threshold for referral. <a href="https://docs.autismresearchcentre.com/tests/AQ10.pdf" target="_blank" rel="noopener">PDF</a> · <a href="https://www.autismresearchcentre.com/tests/autism-spectrum-quotient-10-items-aq-10-adult/" target="_blank" rel="noopener">About</a></li>
        <li>ASRS‑v1.1 Screener (6‑Q) — Developed with WHO; free to use with citation. <a href="https://www.hcp.med.harvard.edu/ncs/asrs.php" target="_blank" rel="noopener">Use & scoring</a> · <a href="https://www.hcp.med.harvard.edu/ncs/ftpdir/adhd/6Q_ASRS_English.pdf" target="_blank" rel="noopener">PDF</a></li>
        <li>NICE guideline CG142 — Autism (recognition, referral, diagnosis & management in adults). <a href="https://www.nice.org.uk/guidance/cg142" target="_blank" rel="noopener">Guideline</a></li>
      </ul>
      <hr style="border:0; border-top:1px solid var(--border); margin:12px 0"/>
      <h3>Privacy</h3>
      <p class="muted">All answers stay in your browser. Use “Save” to keep a copy locally, or “Reset” to erase.</p>
    </aside>
  </main>

  <footer>
    <div class="container row">
      <div class="muted" style="font-size:12px">
        © <span id="year"></span> Neurodiversity Screener (Beta). This educational tool paraphrases items inspired by validated instruments to avoid licensing issues. For clinical use, complete the official questionnaires linked above. 
      </div>
      <div style="font-size:12px" class="muted">Made with respect for all neurotypes.</div>
    </div>
  </footer>

  <script>
    const $ = (sel) => document.querySelector(sel);
    const $$ = (sel) => Array.from(document.querySelectorAll(sel));

    // ----- ITEMS -----
    // AQ‑10 inspired (paraphrased). reverse:true means "Agree" lowers score.
    const autismItems = [
      { t: 'I notice tiny details or sounds that others often miss.', reverse:false },
      { t: 'I naturally focus on the big picture rather than the details.', reverse:true },
      { t: 'Doing two things at once feels straightforward for me.', reverse:true },
      { t: 'After an interruption, I get back on track quickly.', reverse:true },
      { t: 'It is easy for me to infer subtle meanings in conversation.', reverse:true },
      { t: 'I can tell when someone listening to me is losing interest.', reverse:true },
      { t: 'When reading stories, figuring out characters’ motives is hard for me.', reverse:false },
      { t: 'I enjoy cataloguing or collecting detailed information about topics I like.', reverse:false },
      { t: 'I can usually work out what someone else is thinking or feeling.', reverse:true },
      { t: 'Imagining myself in someone else’s shoes comes easily.', reverse:true },
    ];

    // ASRS‑v1.1 6‑Q inspired (paraphrased). rule defines which answers count as a positive screen for that item.
    // rule: 'S+' = Sometimes/Often/Very Often; 'O+' = Often/Very Often
    const adhdItems = [
      { t: 'How often do you struggle to finish the last details once the hard part is over?', rule:'S+' },
      { t: 'How often is it difficult for you to organize tasks and materials?', rule:'S+' },
      { t: 'How often do you forget appointments or obligations?', rule:'S+' },
      { t: 'When a task requires sustained mental effort, how often do you delay getting started?', rule:'O+' },
      { t: 'How often do you feel restless or fidgety when you have to sit for a long time?', rule:'O+' },
      { t: 'How often do you feel “on the go,” as if driven by a motor?', rule:'O+' },
    ];

    // ----- RENDER FORMS -----
    function renderAutism(){
      const f = $('#form1'); f.innerHTML = '';
      autismItems.forEach((q,i)=>{
        const id = `a_${i}`;
        f.insertAdjacentHTML('beforeend', `
          <fieldset class="q">
            <legend>${i+1}. ${q.t}</legend>
            <div class="opts">
              ${[ 'Strongly Disagree','Disagree','Agree','Strongly Agree' ].map((lbl,idx)=>{
                return `<div class="opt"><input type="radio" name="${id}" id="${id}_${idx}" value="${idx}"><label for="${id}_${idx}">${lbl}</label></div>`
              }).join('')}
            </div>
          </fieldset>
        `);
      })
    }

    function renderADHD(){
      const f = $('#form2'); f.innerHTML = '';
      adhdItems.forEach((q,i)=>{
        const id = `h_${i}`;
        f.insertAdjacentHTML('beforeend', `
          <fieldset class="q">
            <legend>${i+1}. ${q.t}</legend>
            <div class="opts">
              ${[ 'Never','Rarely','Sometimes','Often','Very Often' ].map((lbl,idx)=>{
                return `<div class="opt"><input type="radio" name="${id}" id="${id}_${idx}" value="${idx}"><label for="${id}_${idx}">${lbl}</label></div>`
              }).join('')}
            </div>
          </fieldset>
        `);
      })
    }

    renderAutism();
    renderADHD();

    // ----- NAVIGATION -----
    const panels = ['#panel0','#panel1','#panel2','#panel3'];
    let step = 0;
    function go(n){ step = Math.max(0, Math.min(3, n)); update(); saveLocal(); }

    function update(){
      panels.forEach((sel,idx)=> $(sel).classList.toggle('hidden', idx!==step));
      [0,1,2,3].forEach(i=> $('#step'+i).classList.toggle('active', i===step));
      if(step===3) compute();
    }

    // ----- SCORING -----
    function compute(){
      // Autism: Agree/Strongly Agree = 1 point (reverse items invert). Threshold 6+ suggests referral.
      const aAnswers = autismItems.map((q,i)=>{
        const checked = $(`input[name="a_${i}"]:checked`);
        const v = checked ? parseInt(checked.value,10) : null; // 0..3
        return v;
      });
      const aScore = aAnswers.reduce((acc,v,i)=>{
        if(v===null) return acc;
        // map 0..3 -> disagree..agree
        const agreed = (v>=2); // Agree or Strongly Agree
        const point = autismItems[i].reverse ? (agreed?0:1) : (agreed?1:0);
        return acc + point;
      }, 0);
      const aTotal = autismItems.length;

      // ADHD: Items 1-3 positive if Sometimes/Often/Very Often; Items 4-6 positive if Often/Very Often.
      const hAnswers = adhdItems.map((q,i)=>{
        const checked = $(`input[name="h_${i}"]:checked`);
        const v = checked ? parseInt(checked.value,10) : null; // 0..4
        return v;
      });
      const hScore = hAnswers.reduce((acc,v,i)=>{
        if(v===null) return acc;
        const rule = adhdItems[i].rule;
        const positive = rule==='S+' ? (v>=2) : (v>=3); // S+: 2..4; O+: 3..4
        return acc + (positive?1:0);
      }, 0);
      const hTotal = adhdItems.length;

      // Update UI
      const aPct = Math.round((aScore/aTotal)*100);
      const hPct = Math.round((hScore/hTotal)*100);
      $('#aBar').style.width = aPct + '%';
      $('#hBar').style.width = hPct + '%';
      const aTag = $('#aScoreTag'); aTag.textContent = `${aScore} / ${aTotal}`; aTag.className = 'tag ' + (aScore>=6? 'flag' : (aScore>=4? 'caution':'good'));
      const hTag = $('#hScoreTag'); hTag.textContent = `${hScore} / ${hTotal}`; hTag.className = 'tag ' + (hScore>=4? 'flag' : (hScore>=2? 'caution':'good'));

      $('#aInterp').innerHTML = aScore>=6
        ? 'Your responses align with autistic traits at a level where <strong>further assessment is commonly recommended</strong> in research using AQ‑10 thresholds.'
        : (aScore>=4 ? 'You endorsed several autistic traits. This may or may not impact daily life; consider monitoring, reading more, or speaking with a clinician if you have concerns.'
                      : 'You endorsed few autistic traits on this brief screener.');

      $('#hInterp').innerHTML = hScore>=4
        ? 'You have <strong>4+ positive responses</strong> on the ASRS‑style screener, which suggests symptoms consistent with ADHD and merits clinical follow‑up.'
        : (hScore>=2 ? 'You endorsed some ADHD‑like symptoms. If they cause impairment, consider discussing with a clinician.'
                      : 'Few ADHD‑like symptoms endorsed on this brief screener.');

      // prepare downloadable JSON
      const payload = {
        meta: { tool: 'Neurodiversity Screener (Beta)', date: new Date().toISOString() },
        person: { name: $('#name').value||null, age: $('#age').value||null },
        autism: { score: aScore, total: aTotal, percentage:aPct, rawAnswers: aAnswers },
        adhd: { score: hScore, total: hTotal, percentage:hPct, rawAnswers: hAnswers },
        note: 'Educational only. Thresholds informed by AQ‑10 and WHO ASRS‑v1.1 literature.'
      };
      const blob = new Blob([JSON.stringify(payload,null,2)], {type:'application/json'});
      const url = URL.createObjectURL(blob);
      const a = $('#downloadBtn'); a.href = url; a.download = `neurodiversity_screener_${Date.now()}.json`;
    }

    // ----- PERSISTENCE -----
    function saveLocal(){
      const data = {
        step,
        date: $('#date').value || null,
        name: $('#name').value || null,
        age: $('#age').value || null,
        a: autismItems.map((_,i)=>{
          const ch = $(`input[name="a_${i}"]:checked`); return ch? ch.value : null; }),
        h: adhdItems.map((_,i)=>{
          const ch = $(`input[name="h_${i}"]:checked`); return ch? ch.value : null; }),
      };
      localStorage.setItem('nd_screener_v1', JSON.stringify(data));
    }

    function loadLocal(){
      const raw = localStorage.getItem('nd_screener_v1'); if(!raw) return;
      try{
        const data = JSON.parse(raw);
        $('#date').value = data.date || '';
        $('#name').value = data.name || '';
        $('#age').value = data.age || '';
        data.a?.forEach((v,i)=>{ if(v!==null){ const id = `#a_${i}_${v}`; const el = $(id); if(el) el.checked = true; }});
        data.h?.forEach((v,i)=>{ if(v!==null){ const id = `#h_${i}_${v}`; const el = $(id); if(el) el.checked = true; }});
        if(typeof data.step==='number') step=data.step;
      }catch(e){ console.warn('Could not parse saved data'); }
      update();
    }

    function resetAll(){
      if(!confirm('Clear all answers and start over?')) return;
      localStorage.removeItem('nd_screener_v1');
      $$('input[type=radio]').forEach(el=> el.checked=false);
      $('#date').value=''; $('#name').value=''; $('#age').value='';
      step=0; update();
    }

    $('#saveBtn').addEventListener('click', ()=>{ saveLocal(); alert('Saved to this device.'); });
    $('#resetBtn').addEventListener('click', resetAll);
    window.addEventListener('beforeunload', saveLocal);
    $$('form').forEach(f=> f.addEventListener('change', saveLocal));

    $('#year').textContent = new Date().getFullYear();
    // default date
    if(!$('#date').value){ const d = new Date(); $('#date').value = d.toISOString().slice(0,10); }

    loadLocal();
  </script>
</body>
</html>
